<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>WIP: Taskfile instead of Makefile? | DevCube</title>
<meta name=keywords content="tasklist,tutorial,automation"><meta name=description content="Recently, I stumbled upon a tool called Taskfile. It is a task runner, similar to Makefile, but with many improvements. I decided to try it and see if it can replace my Makefiles.
Why Taskfile?
First of all, Makefile is a good tool. Today, you can use it on any platform, not just Linux. It is a standard tool for running tasks. It is flexible and powerful. My relation with it is love/hate. It can be tricky to write a good Makefile or to debug it. Reading also can be a challenge. Because of that, when I found out about Taskfile, I decided to try it."><meta name=author content="Robert Nemet"><link rel=canonical href=https://rnemet.dev/posts/tools/taskfile/><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://rnemet.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rnemet.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rnemet.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://rnemet.dev/apple-touch-icon.png><link rel=mask-icon href=https://rnemet.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://rnemet.dev/posts/tools/taskfile/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-L148RQBR36"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-L148RQBR36")}</script><meta property="og:url" content="https://rnemet.dev/posts/tools/taskfile/"><meta property="og:site_name" content="DevCube"><meta property="og:title" content="WIP: Taskfile instead of Makefile?"><meta property="og:description" content="Recently, I stumbled upon a tool called Taskfile. It is a task runner, similar to Makefile, but with many improvements. I decided to try it and see if it can replace my Makefiles.
Why Taskfile? First of all, Makefile is a good tool. Today, you can use it on any platform, not just Linux. It is a standard tool for running tasks. It is flexible and powerful. My relation with it is love/hate. It can be tricky to write a good Makefile or to debug it. Reading also can be a challenge. Because of that, when I found out about Taskfile, I decided to try it."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-07-29T15:32:51+02:00"><meta property="article:modified_time" content="2023-07-29T15:32:51+02:00"><meta property="article:tag" content="Tasklist"><meta property="article:tag" content="Tutorial"><meta property="article:tag" content="Automation"><meta property="og:image" content="https://rnemet.dev/images/hardworking_cube.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rnemet.dev/images/hardworking_cube.jpg"><meta name=twitter:title content="WIP: Taskfile instead of Makefile?"><meta name=twitter:description content="Recently, I stumbled upon a tool called Taskfile. It is a task runner, similar to Makefile, but with many improvements. I decided to try it and see if it can replace my Makefiles.
Why Taskfile?
First of all, Makefile is a good tool. Today, you can use it on any platform, not just Linux. It is a standard tool for running tasks. It is flexible and powerful. My relation with it is love/hate. It can be tricky to write a good Makefile or to debug it. Reading also can be a challenge. Because of that, when I found out about Taskfile, I decided to try it."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://rnemet.dev/posts/"},{"@type":"ListItem","position":2,"name":"WIP: Taskfile instead of Makefile?","item":"https://rnemet.dev/posts/tools/taskfile/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"WIP: Taskfile instead of Makefile?","name":"WIP: Taskfile instead of Makefile?","description":"Recently, I stumbled upon a tool called Taskfile. It is a task runner, similar to Makefile, but with many improvements. I decided to try it and see if it can replace my Makefiles.\nWhy Taskfile? First of all, Makefile is a good tool. Today, you can use it on any platform, not just Linux. It is a standard tool for running tasks. It is flexible and powerful. My relation with it is love/hate. It can be tricky to write a good Makefile or to debug it. Reading also can be a challenge. Because of that, when I found out about Taskfile, I decided to try it.\n","keywords":["tasklist","tutorial","automation"],"articleBody":"Recently, I stumbled upon a tool called Taskfile. It is a task runner, similar to Makefile, but with many improvements. I decided to try it and see if it can replace my Makefiles.\nWhy Taskfile? First of all, Makefile is a good tool. Today, you can use it on any platform, not just Linux. It is a standard tool for running tasks. It is flexible and powerful. My relation with it is love/hate. It can be tricky to write a good Makefile or to debug it. Reading also can be a challenge. Because of that, when I found out about Taskfile, I decided to try it.\nFirst impressions Taskfile is written in Go. It is a single binary that you can download and use. If you can run Go programs, you can run Taskfile. It is a big plus for me. See docs on how to install it.\nTaskfile is a YAML file. Most of us are familiar with YAML, and many tools use it. It is easy to read, write, and parse, and IDEs have good support. Sometimes, it feels like we are programming in YAML. If you do not believe me, check out your CI/CD pipeline. I bet it is written in YAML.\nYou can use auto-completion if you use ZSH, Bash, Fish, or PowerShell. It is a big plus for me. I like to have auto-completion for my tools. It makes my life easier, especially when you start adding more and more tasks. When you have a lot of tasks, they can be grouped into namespaces, hidden from a user(internal task), global, or local, etc.\nChallenge: automate testing for Klock Klock is my pet project. It is a ValidatingAdmissionWebhook for Kubernetes. It enables locking Kubernetes resources. You can read more here Klock - Kubernetes locking.\nOne of the things that was on my to-do list was to automate testing. I’m doing it locally because it is easier and faster. But still, it is cumbersome to start the Kind cluster, deploy Klock, and run tests. I decided to use Taskfile to automate it.\nWhat I need to do is:\nStart Kind cluster Install Cert Manager Build K8s manifests Build the Docker image if there are any code/configuration changes Load the image into a Kind cluster Run tests You can find my initial work on the git branch migrate_taskfile. If you compare it with the main branch, you’ll notice I added a new file called Taskfile.yml. It is a main Taskfile. Also, I added the folder tasks with two files, Taskfile.testing.yml and Taskfile.tools.yml. They are imported into the main Taskfile. The idea is to have a main Taskfile that will import other Taskfiles, while other Taskfiles will contain specific tasks.\nStart Kind cluster First, I need to start the Kind cluster:\nversion: '3' vars: KIND_VERSION: \"v0.20.0 go1.20.5\" CERT_MANAGER_VERSION: v1.12.0 IMG: controller:latest tasks: init-cluster: desc: Create a kind cluster named klock preconditions: - sh: kind version | grep \"{{.KIND_VERSION}}\" msg: \"kind version does not match {{.KIND_VERSION}}. Please install right version of kind\" cmds: - kind create cluster --name klock status: - kind get clusters | grep klock The slug tasks contain a list of tasks. This task is called init-cluster. It has a description, preconditions, commands, and status. For any task name and cmds slugs are mandatory. Others are optional. What they do:\ncmds - list of commands that will be executed desc - description of the task, it will be shown when you run list tasks: task -l preconditions - list of preconditions that must be met before running the task. If any of the preconditions fail, the task will not be executed. In this case, I check if the Kind version is the same as the one I’m using. If not, the task will fail with the message. status - list of commands that will be run to see if a task can be considered done. That means the task is done if the Kind cluster named klock exists. It does\nnot care how a cluster is created. It just checks if it exists. Notice block vars. It is a list of variables that can be used in the Taskfile. In this case, I’m using KIND_VERSION to check if the Kind version is the same as the one I’m using. The Taskfile uses Go template to render variables.\nInstall Cert Manager Next, I need to install Cert Manager:\ninstall-cert-manager: desc: Install cert-manager deps: - init-cluster cmds: - kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/{{.CERT_MANAGER_VERSION}}/cert-manager.yaml - echo \"Waiting for cert-manager to be ready\" \u0026\u0026 sleep 25 status: - kubectl -n cert-manager get pods | grep Running | wc -l | grep -q 3 The new thing here is the deps slug. It is a list of tasks that must be executed before this task. In this case, I need to create a Kind cluster before I can install Cert Manager. Again, I’m using a variable CERT_MANAGER_VERSION to install the correct version of Cert Manager.\nBuild K8s manifests To generate manifests, I’m using kubebuilder tool contrller-gen:\nmanifests: desc: Generate manifests e.g. CRD, RBAC etc. cmds: - controller-gen rbac:roleName=manager-role crd webhook paths=\"./...\" output:crd:artifacts:config=config/crd/bases sources: - main.go - apis/**/*.go - pkg/**/*.go generates: - config/crd/bases/**/*.yaml This time I’m using sources and generates slugs:\nsources is a list of files that will be used to generate manifests generates is a list of files that will be generated In this case, Taskfile will generate a checksum for sources from the previous run. If the checksum is the same, it will not run the task. It will just print out that the task is done. If the checksum is different, it will run the task. It is a nice feature that can save you some time.\nDeploy Klock to Kind cluster To deploy Klock to the Kind cluster, I’m using kustomize:\ndeploy: desc: Deploy the controller to the kind cluster and wait for it to be ready. Use IMG to specify image name deps: - install-cert-manager - manifests - docker-build cmds: - task: kind-load silent: true - cd config/manager \u0026\u0026 kustomize edit set image controller={{.IMG}} - kustomize build config/default | kubectl apply -f - - echo \"Waiting for controller to be ready\" \u0026\u0026 sleep 25 status: - kubectl get pods -n klock-system | grep klock-controller | wc -l | grep -q 1 This task depends on install-cert-manager, manifests, docker-build, and kind-load tasks. It means that those tasks have to be executed before this task. But a small catch, kind-load can be done only if docker-build is done successfully. Other tasks can be executed in parallel. That is why other tasks are in the deps slug. Tasks in the deps slug will be executed in parallel. Tasks will be executed in order while in the cmds slug.\nI’m adding a new slug, silent to suppress the task output.\nThis way, I managed to do some tasks in parallel and speed up the process.\nRun tests To run tests I’m using KUTTL:\nktest: desc: Run kuttl tests. Specify image name with IMG cmds: - task: deploy silent: true - kubectl kuttl test There is nothing special here. Except I should move the deploy task to the deps slug. But this is still a work in progress.\nPutting It All Together My main Taskfile looks like this:\n# https://taskfile.dev version: '3' includes: tools: tasks/Taskfile.tools.yml tests: tasks/Taskfile.testing.yml tasks: default: silent: true cmds: - echo \"Welcome to Klock!\" - task -l I’m including two other Taskfiles. One is for tools, and the other is for tests. The default task is to print out a welcome message and list all tasks. Invoking the task without any arguments, it will run the default task:\n$ task Welcome to Klock! task: Available tasks for this project: * tests:cleanup: Delete the kind cluster named klock * tests:deploy: Deploy the controller to the kind cluster and wait for it to be ready. Use IMG to specify image name * tests:docker-build: Build the docker image, specify image name with IMG * tests:docker-push: Push the docker image, specify image name with IMG * tests:init-cluster: Create a kind cluster named klock * tests:install-cert-manager: Install cert-manager * tests:kind-load: Load the docker image into the kind cluster, specify image name with IMG * tests:ktest: Run kuttl tests. Specify image name with IMG * tests:manifests: Generate manifests e.g. CRD, RBAC etc. * tests:publish: Run tests and publish the docker image. Specify image name with IMG and version with VERSION * tests:undeploy: Undeploy the controller from the kind cluster * tools:controller-gen: Download controller-gen locally if necessary. * tools:create-localbin: Create the localbin directory * tools:delete-kustomize: Delete kustomize * tools:envtest: Download envtest-setup locally if necessary. * tools:install-kustomize: Install kustomize To run the tests, I’m using task tests:ktest IMG=rnemet/klock:test. It will run the tests:ktest task and pass the image name to the task. This image name is propagated to other tasks that need it. As you can see, I grouped tasks into namespaces. I’m using the tests namespace for tasks related to tests and the tools namespace for tasks related to tools.\nConclusion I’m still learning Taskfile. There are better ways to do things. But I’m pleased with the result. Still, I need to migrate other Makefile targets to Taskfile. But the results are promising. Changes are more readable, easier to maintain and to understand. When I migrate the rest of the Makefile targets, I can compare Taskfile and Makefile with more insights. But at the moment, Taskfile is a winner.\nLooking into Taskfile Github repo, I can see that the project is active, and much work is underway. I’m looking forward to new features and improvements.\nThis is a work in progress. I already have ideas on how to make it better. But I will leave that for another blog post. Meanwhile, you can check Taskfile and let me know what you think. Thanks for reading.\nReferences Taskfile ","wordCount":"1630","inLanguage":"en","image":"https://rnemet.dev/images/hardworking_cube.jpg","datePublished":"2023-07-29T15:32:51+02:00","dateModified":"2023-07-29T15:32:51+02:00","author":{"@type":"Person","name":"Robert Nemet"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://rnemet.dev/posts/tools/taskfile/"},"publisher":{"@type":"Organization","name":"DevCube","logo":{"@type":"ImageObject","url":"https://rnemet.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://rnemet.dev/ accesskey=h title="Home (Alt + H)"><img src=https://rnemet.dev/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://rnemet.dev/posts/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://rnemet.dev/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://rnemet.dev/posts/practical_k8s/ title="Practical k8s"><span>Practical k8s</span></a></li><li><a href=https://rnemet.dev/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://rnemet.dev/about/ title="About Me"><span>About Me</span></a></li><li><a href=https://rnemet.dev/ title><span></span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>WIP: Taskfile instead of Makefile?</h1><div class=post-description></div><div class=post-meta><span title='2023-07-29 15:32:51 +0200 CEST'>July 29, 2023</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Robert Nemet</div></header><figure class=entry-cover><img loading=lazy src=https://rnemet.dev/images/hardworking_cube.jpg alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#why-taskfile aria-label="Why Taskfile?">Why Taskfile?</a></li><li><a href=#first-impressions aria-label="First impressions">First impressions</a></li><li><a href=#challenge-automate-testing-for-klock aria-label="Challenge: automate testing for Klock">Challenge: automate testing for Klock</a><ul><li><a href=#start-kind-cluster aria-label="Start Kind cluster">Start Kind cluster</a></li><li><a href=#install-cert-manager aria-label="Install Cert Manager">Install Cert Manager</a></li><li><a href=#build-k8s-manifests aria-label="Build K8s manifests">Build K8s manifests</a></li><li><a href=#deploy-klock-to-kind-cluster aria-label="Deploy Klock to Kind cluster">Deploy Klock to Kind cluster</a></li><li><a href=#run-tests aria-label="Run tests">Run tests</a></li><li><a href=#putting-it-all-together aria-label="Putting It All Together">Putting It All Together</a></li></ul></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li><li><a href=#references aria-label=References>References</a></li></ul></div></details></div><div class=post-content><p>Recently, I stumbled upon a tool called <a href=https://taskfile.dev/#/>Taskfile</a>. It is a task runner, similar to Makefile, but with many improvements. I decided to try it and see if it can replace my Makefiles.</p><h2 id=why-taskfile>Why Taskfile?<a hidden class=anchor aria-hidden=true href=#why-taskfile>#</a></h2><p>First of all, Makefile is a good tool. Today, you can use it on any platform, not just Linux. It is a standard tool for running tasks. It is flexible and powerful. My relation with it is love/hate. It can be tricky to write a good Makefile or to debug it. Reading also can be a challenge. Because of that, when I found out about Taskfile, I decided to try it.</p><h2 id=first-impressions>First impressions<a hidden class=anchor aria-hidden=true href=#first-impressions>#</a></h2><p>Taskfile is written in Go. It is a single binary that you can download and use. If you can run Go programs, you can run Taskfile. It is a big plus for me. See <a href=https://taskfile.dev/#/installation>docs on how to install it</a>.</p><p>Taskfile is a YAML file. Most of us are familiar with YAML, and many tools use it. It is easy to read, write, and parse, and IDEs have good support. Sometimes, it feels like we are programming in YAML. If you do not believe me, check out your CI/CD pipeline. I bet it is written in YAML.</p><p>You can use auto-completion if you use ZSH, Bash, Fish, or PowerShell. It is a big plus for me. I like to have auto-completion for my tools. It makes my life easier, especially when you start adding more and more tasks. When you have a lot of tasks, they can be grouped into namespaces, hidden from a user(internal task), global, or local, etc.</p><h2 id=challenge-automate-testing-for-klock>Challenge: automate testing for Klock<a hidden class=anchor aria-hidden=true href=#challenge-automate-testing-for-klock>#</a></h2><p><a href=https://github.com/robert-nemet/klock>Klock</a> is my pet project. It is a <code>ValidatingAdmissionWebhook</code> for Kubernetes. It enables locking Kubernetes resources. You can
read more here <a href=https://rnemet.dev/posts/projects/klock/>Klock - Kubernetes locking</a>.</p><p>One of the things that was on my to-do list was to automate testing. I&rsquo;m doing it locally because it is easier and faster. But still, it is cumbersome to start the
<a href=https://kind.sigs.k8s.io/>Kind cluster</a>, deploy Klock, and run tests. I decided to use Taskfile to automate it.</p><p>What I need to do is:</p><ol><li>Start Kind cluster</li><li>Install Cert Manager</li><li>Build K8s manifests</li><li>Build the Docker image if there are any code/configuration changes</li><li>Load the image into a Kind cluster</li><li>Run tests</li></ol><p>You can find my initial work on the git branch <a href=https://github.com/robert-nemet/klock/tree/migrate_taskfile>migrate_taskfile</a>. If you compare it with the <strong>main</strong>
branch, you&rsquo;ll notice I added a new file called <code>Taskfile.yml</code>. It is a main Taskfile. Also, I added the folder <code>tasks</code> with two files, <code>Taskfile.testing.yml</code> and
<code>Taskfile.tools.yml</code>. They are imported into the main Taskfile. The idea is to have a main Taskfile that will import other Taskfiles, while other Taskfiles will contain
specific tasks.</p><h3 id=start-kind-cluster>Start Kind cluster<a hidden class=anchor aria-hidden=true href=#start-kind-cluster>#</a></h3><p>First, I need to start the Kind cluster:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#39;3&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>vars</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>KIND_VERSION</span>: <span style=color:#e6db74>&#34;v0.20.0 go1.20.5&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>CERT_MANAGER_VERSION</span>: <span style=color:#ae81ff>v1.12.0</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>IMG</span>: <span style=color:#ae81ff>controller:latest</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>tasks</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>init-cluster</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>desc</span>: <span style=color:#ae81ff>Create a kind cluster named klock</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>preconditions</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>sh</span>: <span style=color:#ae81ff>kind version | grep &#34;{{.KIND_VERSION}}&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>msg</span>: <span style=color:#e6db74>&#34;kind version does not match {{.KIND_VERSION}}. Please install right version of kind&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>cmds</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>kind create cluster --name klock</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>status</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>kind get clusters | grep klock</span>
</span></span></code></pre></div><p>The slug <code>tasks</code> contain a list of tasks. This task is called <code>init-cluster</code>. It has a description, preconditions, commands, and status. For any task <code>name</code> and <code>cmds</code>
slugs are mandatory. Others are optional. What they do:</p><ul><li><code>cmds</code> - list of commands that will be executed</li><li><code>desc</code> - description of the task, it will be shown when you run list tasks: <code>task -l</code></li><li><code>preconditions</code> - list of preconditions that must be met before running the task. If any of the preconditions fail, the task will not be executed. In this case, I
check if the Kind version is the same as the one I&rsquo;m using. If not, the task will fail with the message.</li><li><code>status</code> - list of commands that will be run to see if a task can be considered done. That means the task is done if the Kind cluster named <code>klock</code> exists. It does<br>not care how a cluster is created. It just checks if it exists.</li></ul><p>Notice block <code>vars</code>. It is a list of variables that can be used in the Taskfile. In this case, I&rsquo;m using <code>KIND_VERSION</code> to check if the Kind version is the same as the
one I&rsquo;m using. The Taskfile uses <a href=https://golang.org/pkg/text/template/>Go template</a> to render variables.</p><h3 id=install-cert-manager>Install Cert Manager<a hidden class=anchor aria-hidden=true href=#install-cert-manager>#</a></h3><p>Next, I need to install <a href=https://cert-manager.io/>Cert Manager</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>  <span style=color:#f92672>install-cert-manager</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>desc</span>: <span style=color:#ae81ff>Install cert-manager    </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>deps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>init-cluster</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>cmds</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/{{.CERT_MANAGER_VERSION}}/cert-manager.yaml</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>echo &#34;Waiting for cert-manager to be ready&#34; &amp;&amp; sleep 25</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>status</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>kubectl -n cert-manager get pods | grep Running | wc -l | grep -q 3</span>
</span></span></code></pre></div><p>The new thing here is the <code>deps</code> slug. It is a list of tasks that must be executed before this task. In this case, I need to create a Kind cluster before I can install Cert Manager. Again, I&rsquo;m using a variable <code>CERT_MANAGER_VERSION</code> to install the correct version of Cert Manager.</p><h3 id=build-k8s-manifests>Build K8s manifests<a hidden class=anchor aria-hidden=true href=#build-k8s-manifests>#</a></h3><p>To generate manifests, I&rsquo;m using <a href=https://book.kubebuilder.io/reference/controller-gen.html>kubebuilder tool contrller-gen</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span> <span style=color:#f92672>manifests</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>desc</span>: <span style=color:#ae81ff>Generate manifests e.g. CRD, RBAC etc.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>cmds</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>controller-gen rbac:roleName=manager-role crd webhook paths=&#34;./...&#34; output:crd:artifacts:config=config/crd/bases</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>sources</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>main.go</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>apis/**/*.go</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>pkg/**/*.go</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>generates</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>config/crd/bases/**/*.yaml</span>
</span></span></code></pre></div><p>This time I&rsquo;m using <code>sources</code> and <code>generates</code> slugs:</p><ul><li><code>sources</code> is a list of files that will be used to generate manifests</li><li><code>generates</code> is a list of files that will be generated</li></ul><p>In this case, Taskfile will generate a checksum for sources from the previous run. If the checksum is the same, it will not run the task. It will just print out that the
task is done. If the checksum is different, it will run the task. It is a nice feature that can save you some time.</p><h3 id=deploy-klock-to-kind-cluster>Deploy Klock to Kind cluster<a hidden class=anchor aria-hidden=true href=#deploy-klock-to-kind-cluster>#</a></h3><p>To deploy Klock to the Kind cluster, I&rsquo;m using <a href=https://kustomize.io/>kustomize</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>  <span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>desc</span>: <span style=color:#ae81ff>Deploy the controller to the kind cluster and wait for it to be ready. Use IMG to specify image name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>deps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>install-cert-manager</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>manifests</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>docker-build</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>cmds</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>task</span>: <span style=color:#ae81ff>kind-load</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>silent</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>cd config/manager &amp;&amp; kustomize edit set image controller={{.IMG}}</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>kustomize build config/default | kubectl apply -f -</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>echo &#34;Waiting for controller to be ready&#34; &amp;&amp; sleep 25</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>status</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>kubectl get pods -n klock-system | grep klock-controller | wc -l | grep -q 1</span>
</span></span></code></pre></div><p>This task depends on <code>install-cert-manager</code>, <code>manifests</code>, <code>docker-build</code>, and <code>kind-load</code> tasks. It means that those tasks have to be executed before this task.
But a small catch, <code>kind-load</code> can be done only if <code>docker-build</code> is done successfully. Other tasks can be executed in parallel. That is why other tasks are in the <code>deps</code> slug. Tasks in the <code>deps</code> slug will be executed in parallel. Tasks will be executed in order while in the <code>cmds</code> slug.</p><p>I&rsquo;m adding a new slug, <code>silent</code> to suppress the task output.</p><p>This way, I managed to do some tasks in parallel and speed up the process.</p><h3 id=run-tests>Run tests<a hidden class=anchor aria-hidden=true href=#run-tests>#</a></h3><p>To run tests I&rsquo;m using <a href=https://kuttl.dev/>KUTTL</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>  <span style=color:#f92672>ktest</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>desc</span>: <span style=color:#ae81ff>Run kuttl tests. Specify image name with IMG</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>cmds</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>task</span>: <span style=color:#ae81ff>deploy</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>silent</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>kubectl kuttl test</span>
</span></span></code></pre></div><p>There is nothing special here. Except I should move the <code>deploy</code> task to the <code>deps</code> slug. But this is still a work in progress.</p><h3 id=putting-it-all-together>Putting It All Together<a hidden class=anchor aria-hidden=true href=#putting-it-all-together>#</a></h3><p>My main <code>Taskfile</code> looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># https://taskfile.dev</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#39;3&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>includes</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>tools</span>: <span style=color:#ae81ff>tasks/Taskfile.tools.yml</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tests</span>: <span style=color:#ae81ff>tasks/Taskfile.testing.yml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>tasks</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>default</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>silent</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>cmds</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>echo &#34;Welcome to Klock!&#34;</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>task -l</span>
</span></span></code></pre></div><p>I&rsquo;m including two other <code>Taskfiles</code>. One is for tools, and the other is for tests. The <code>default</code> task is to print out a welcome message and list all tasks. Invoking the <code>task</code> without any arguments, it will run the <code>default</code> task:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ task
</span></span><span style=display:flex><span>Welcome to Klock!
</span></span><span style=display:flex><span>task: Available tasks <span style=color:#66d9ef>for</span> this project:
</span></span><span style=display:flex><span>* tests:cleanup:                    Delete the kind cluster named klock
</span></span><span style=display:flex><span>* tests:deploy:                     Deploy the controller to the kind cluster and wait <span style=color:#66d9ef>for</span> it to be ready. Use IMG to specify image name
</span></span><span style=display:flex><span>* tests:docker-build:               Build the docker image, specify image name with IMG
</span></span><span style=display:flex><span>* tests:docker-push:                Push the docker image, specify image name with IMG
</span></span><span style=display:flex><span>* tests:init-cluster:               Create a kind cluster named klock
</span></span><span style=display:flex><span>* tests:install-cert-manager:       Install cert-manager
</span></span><span style=display:flex><span>* tests:kind-load:                  Load the docker image into the kind cluster, specify image name with IMG
</span></span><span style=display:flex><span>* tests:ktest:                      Run kuttl tests. Specify image name with IMG
</span></span><span style=display:flex><span>* tests:manifests:                  Generate manifests e.g. CRD, RBAC etc.
</span></span><span style=display:flex><span>* tests:publish:                    Run tests and publish the docker image. Specify image name with IMG and version with VERSION
</span></span><span style=display:flex><span>* tests:undeploy:                   Undeploy the controller from the kind cluster
</span></span><span style=display:flex><span>* tools:controller-gen:             Download controller-gen locally <span style=color:#66d9ef>if</span> necessary.
</span></span><span style=display:flex><span>* tools:create-localbin:            Create the localbin directory
</span></span><span style=display:flex><span>* tools:delete-kustomize:           Delete kustomize
</span></span><span style=display:flex><span>* tools:envtest:                    Download envtest-setup locally <span style=color:#66d9ef>if</span> necessary.
</span></span><span style=display:flex><span>* tools:install-kustomize:          Install kustomize
</span></span></code></pre></div><p>To run the tests, I&rsquo;m using <code>task tests:ktest IMG=rnemet/klock:test</code>. It will run the <code>tests:ktest</code> task and pass the image name to the
task. This image name is propagated to other tasks that need it. As you can see, I grouped tasks into namespaces. I&rsquo;m using the <code>tests</code> namespace for tasks related to tests and the <code>tools</code> namespace for tasks related to tools.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>I&rsquo;m still learning Taskfile. There are better ways to do things. But I&rsquo;m pleased with the result. Still, I need to migrate other Makefile
targets to Taskfile. But the results are promising. Changes are more readable, easier to maintain and to understand. When I migrate the
rest of the Makefile targets, I can compare Taskfile and Makefile with more insights. But at the moment, Taskfile is a winner.</p><p>Looking into <a href=https://github.com/go-task/task>Taskfile Github repo</a>, I can see that the project is active, and much work is underway. I&rsquo;m
looking forward to new features and improvements.</p><p>This is a work in progress. I already have ideas on how to make it better. But I will leave that for another blog post. Meanwhile, you can
check Taskfile and let me know what you think. Thanks for reading.</p><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=https://taskfile.dev/>Taskfile</a></li></ul><div class=subscribe><iframe src=https://rnemet.substack.com/embed width=480 height=320 style="border:1px solid #eee;background:#fff;margin:auto;display:block" frameborder=0 scrolling=no></iframe></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://rnemet.dev/tags/tasklist/>Tasklist</a></li><li><a href=https://rnemet.dev/tags/tutorial/>Tutorial</a></li><li><a href=https://rnemet.dev/tags/automation/>Automation</a></li></ul><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share WIP: Taskfile instead of Makefile? on x" href="https://x.com/intent/tweet/?text=WIP%3a%20Taskfile%20instead%20of%20Makefile%3f&amp;url=https%3a%2f%2frnemet.dev%2fposts%2ftools%2ftaskfile%2f&amp;hashtags=tasklist%2ctutorial%2cautomation"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share WIP: Taskfile instead of Makefile? on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2frnemet.dev%2fposts%2ftools%2ftaskfile%2f&amp;title=WIP%3a%20Taskfile%20instead%20of%20Makefile%3f&amp;summary=WIP%3a%20Taskfile%20instead%20of%20Makefile%3f&amp;source=https%3a%2f%2frnemet.dev%2fposts%2ftools%2ftaskfile%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share WIP: Taskfile instead of Makefile? on reddit" href="https://reddit.com/submit?url=https%3a%2f%2frnemet.dev%2fposts%2ftools%2ftaskfile%2f&title=WIP%3a%20Taskfile%20instead%20of%20Makefile%3f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share WIP: Taskfile instead of Makefile? on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2frnemet.dev%2fposts%2ftools%2ftaskfile%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share WIP: Taskfile instead of Makefile? on whatsapp" href="https://api.whatsapp.com/send?text=WIP%3a%20Taskfile%20instead%20of%20Makefile%3f%20-%20https%3a%2f%2frnemet.dev%2fposts%2ftools%2ftaskfile%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share WIP: Taskfile instead of Makefile? on telegram" href="https://telegram.me/share/url?text=WIP%3a%20Taskfile%20instead%20of%20Makefile%3f&amp;url=https%3a%2f%2frnemet.dev%2fposts%2ftools%2ftaskfile%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share WIP: Taskfile instead of Makefile? on ycombinator" href="https://news.ycombinator.com/submitlink?t=WIP%3a%20Taskfile%20instead%20of%20Makefile%3f&u=https%3a%2f%2frnemet.dev%2fposts%2ftools%2ftaskfile%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://rnemet.dev/>DevCube</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>